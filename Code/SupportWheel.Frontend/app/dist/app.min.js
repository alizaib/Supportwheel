"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("App",["ngAnimate","ngResource","ngSanitize","angular-loading-bar","shared","components","ui.router","ngStorage","angular-jwt","ngMaterial","ngMessages","SignalR","pascalprecht.translate","md.data.table","angular.filter"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,n){t.otherwise("/"),t.rule(function(e,t){var n=/(.+)(\/+)(\?.*)?$/,r=t.url();return!(!r||!n.test(r))&&r.replace(n,"$1$3")}),n.html5Mode(!0).hashPrefix("!")}]).config(["$mdThemingProvider",function(e){e.theme("default").foregroundPalette[3]="rgba(0,0,0,0.67)"}]).config(["$localStorageProvider",function(e){e.setKeyPrefix("SupportWheel")}]).config(["$httpProvider",function(e){e.interceptors.push("interceptorFactory")}]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"app/locales/",suffix:".json"}).registerAvailableLanguageKeys(["en","es","fr","pt"],{"en-US":"en","es-ES":"es","fr-FR":"fr","pt-BR":"pt"}).useSanitizeValueStrategy("sanitizeParameters")}]).run(["$templateCache","$http","$rootScope",function(e,t,n){t.get("app/shared/views/formMessages.html").then(function(t){e.put("form-messages",t.data)}),n.$on("$stateChangeError",function(e,t,n,r,i,o){console.error(o)})}]),function(){angular.module("components.about",[]).component("swAbout",{templateUrl:"app/components/about/about.html",controller:function(){},bindings:{}})}(),function(){angular.module("components.core.auth",["shared.services.service.security"]).directive("auth",function(){return{restrict:"E",controller:"AuthController",templateUrl:"app/components/core/auth/auth.html",controllerAs:"auth"}}).controller("AuthController",e);e.$inject=["securityService"];function e(e){this.currentUser=e.currentUser,this.isAuthenticated=e.isAuthenticated,this.logout=e.logout,this.showLogin=e.showLogin}}(),function(){angular.module("components.core.authenticatedMenu",["shared.services.service.security"]).directive("authenticatedMenu",function(){return{restrict:"E",controller:"AuthenticatedMenuController",templateUrl:"app/components/core/authenticatedMenu/authenticatedMenu.html",controllerAs:"authMenu"}}).controller("AuthenticatedMenuController",e);e.$inject=["securityService"];function e(e){this.isAuthenticated=e.isAuthenticated}}(),function(){angular.module("components.core.chooseLanguage",["shared.services.service.culture"]).directive("chooseLanguage",function(){return{restrict:"E",controller:"ChooseLanguageController",templateUrl:"app/components/core/chooseLanguage/chooseLanguage.html",controllerAs:"language"}}).controller("ChooseLanguageController",e);e.$inject=["cultureService"];function e(e){this.changeLanguage=function(t){e.setCulture(t)},this.getName=function(){var t=e.getCulture();return void 0!=t?t.name:"Click to choose a language."}}}(),function(){angular.module("components.core.createTabs",[]).directive("createTabs",function(){return{restrict:"E",controller:"CreateTabsController",templateUrl:"app/components/core/createTabs/createTabs.html",controllerAs:"createTabs",scope:{},bindToController:{tabs:"<?",title:"<?",currentView:"<?"}}}).controller("CreateTabsController",e);e.$inject=["$state","$location","$scope"];function e(e,t,n){var r=this;r.onTabSelected=function(e){r.currentTab=_.findIndex(r.tabs,{tabViewName:e.tabViewName})},n.$on("$stateChangeSuccess",function(){i()}),i();function i(){r.currentTab=0,void 0!=r.currentView&&_.findIndex(r.tabs,{tabViewName:r.currentView})>-1?r.currentTab=_.findIndex(r.tabs,{tabViewName:r.currentView}):_.forEach(r.tabs,function(t,n){_.indexOf(t.tabStates,e.current.name)>-1&&(r.currentTab=n)})}n.$watch(function(){return{currentView:r.currentView}},function(e,t){e!==t&&i()},!0)}}(),function(){angular.module("components.core.dataList",[]).directive("abcDataList",e).controller("DataListController",t),e.$inject=[];function e(){return{restrict:"E",controller:"DataListController",templateUrl:"app/components/core/dataList/dataList.html",controllerAs:"dataList",scope:{},bindToController:{config:"=",data:"=",selected:"=?",enablePagination:"<?",orderByField:"=",pageSize:"=?",pageNumber:"=?",totalRecords:"<?",onPaginate:"&"}}}t.$inject=["$filter","$scope"];function t(e,t){var n=this;n.$onInit=function(){void 0==n.selected&&(n.selected=[]);n.filteredData=n.data,n.filter={value:"",options:{updateOn:"default blur",debounce:{default:200,blur:0}}},void 0==n.pageNumber&&(n.pageNumber=1);void 0==n.pageSize&&(n.pageSize=5)},n.paginate=function(){void 0!=n.onPaginate&&n.onPaginate()};n.removeFilter=function(){n.filter.show=!1,n.filter.value="",r(n.filter.value,n.orderByField),n.filter.form.$dirty&&n.filter.form.$setPristine()},n.filterChanged=function(e){n.config.onQuery&&n.config.onQuery(e,n.orderByField);r(e,n.orderByField)},n.orderByChanged=function(e){n.config.onQuery&&n.config.onQuery(n.filter.value,e);r(n.filter.value,e)};t.$watch(function(){return{data:n.data,orderField:n.orderByField}},function(e,t){e!==t&&r(n.filter.value,n.orderByField)},!0);function r(t,r){var i=e("filter")(n.data,t);i=e("orderBy")(i,r),n.filteredData=i}}}(),angular.module("components.core",["components.core.auth","components.core.authenticatedMenu","components.core.chooseLanguage","components.core.createTabs","components.core.dataList","components.core.login","components.core.signup"]),function(){angular.module("components.core.login",["shared.services.service.security"]).directive("login",function(){return{restrict:"E",controller:"LoginController",templateUrl:"app/components/core/login/login.html",controllerAs:"login"}}).controller("LoginController",e);e.$inject=["securityService"];function e(e){this.data={},this.login=e.login,this.closeLogin=e.closeLogin,this.loginReason=e.getLoginReason,this.loginError=e.getLastAuthError}}(),function(){angular.module("components.core.signup",["shared.services.service.user","shared.services.service.notification","shared.services.factory.handleException"]).component("swSignup",{templateUrl:"app/components/core/signup/signup.html",controller:e}),e.$inject=["userService","notificationService","handleExceptionFactory"];function e(e,t,n){this.form={},this.signup=function(r){e.save(r).then(function(e){t.show("success","SIGNUP.REGISTERED")},n)},this.teste=function(e){console.log(e)}}}(),function(){angular.module("components.cultura.culturaSelect",["shared.services.service.culture"]).component("abcCulturaSelect",{templateUrl:"app/components/cultura/culturaSelect/culturaSelect.html",controller:e,bindings:{id:"=",required:"<?"}}),e.$inject=["cultureService","$scope"];function e(e,t){var n=this;n.culturas=[],n.selectedItemChange=function(e,t){e?(e.strIdCultura!=n.id&&(n.id=e.strIdCultura),n.required&&t.$setValidity("required",!0)):(n.id=void 0,n.required&&t.$setValidity("required",!1))},n.$onInit=r;function r(){e.load().then(function(e){if(n.culturas=e,n.id){var t=_.findIndex(n.culturas,{strIdCultura:n.id});t>-1&&(n.selectedItem=n.culturas[t])}})}var i=e.onCultureChange(r);t.$on("$destroy",i),t.$watch(function(){return{id:n.id,required:n.required}},function(e,t){e!==t&&r()},!0)}}(),angular.module("components.cultura",["components.cultura.culturaSelect"]),function(){angular.module("components.engineer.engineer.form",["shared.services.factory.handleException","shared.services.service.engineer","shared.services.service.viewstate","shared.services.service.notification"]).component("swEngineerForm",{templateUrl:"app/components/engineer/engineer.form/engineer.form.html",controller:e,bindings:{id:"<?"}}),e.$inject=["handleExceptionFactory","viewstateService","notificationService","engineerService","$location"];function e(e,t,n,r,i){var o=this;o.data=t.getView("Engineer"),o.$onInit=function(){void 0!=o.id&&r.load({intIdEngineer:o.id}).then(function(e){void 0==e.intIdEngineer?(n.show("error","GENERAL.ERROR-NOTFOUND"),t.newView("Engineer"),i.path("restrict/engineer")):o.form=e}).catch(e)},o.save=function(t){var o=angular.copy(t);r.save(o).then(function(e){n.show("success","GENERAL.SAVED-SUCCESSFULLY"),i.path("restrict/engineer/"+e.intIdEngineer)},e)},o.remove=function(o){r.remove({intIdEngineer:o}).then(function(e){n.show("success","GENERAL.REMOVED-SUCCESSFULLY"),t.newView("Engineer"),i.path("restrict/engineer")},e)},o.newEngineer=function(){t.newView("Engineer"),i.path("restrict/engineer")}}}(),function(){angular.module("components.engineer.engineer.list",["shared.services.factory.handleException","shared.services.service.engineer","shared.services.service.viewstate","shared.services.service.notification"]).component("swEngineerList",{templateUrl:"app/components/engineer/engineer.list/engineer.list.html",controller:e,bindings:{}}),e.$inject=["handleExceptionFactory","viewstateService","notificationService","engineerService","$scope","$location"];function e(e,t,n,r,i,o){var a=this;a.data=t.getView("engineerList"),a.data.engineers=a.data.engineers||[],a.$onInit=function(){a.config={enableFilter:!1,enableRowSelection:!1,columns:[{field:"strNameEngineer",isNumeric:!1,displayName:'{{"ENGINEER-LIST.NAME" | translate }}'}],itemMenu:[{name:'{{"GENERAL.SELECT" | translate }}',icon:"edit",ariaLabel:'{{"GENERAL.SELECT" | translate }}',onClick:a.selectEngineer}]};var e=r.listenEvent.both.all(function(){if(a.data.searched){var e=angular.copy(a.data);e.cache=!1,e.applyScope=!0,s(e)}});i.$on("$destroy",e);s(a.data)},a.selectEngineer=function(e){var e=e.item;o.path("/restrict/engineer/"+e.intIdEngineer)};function s(t){var n=angular.copy(t);delete n.engineers,void 0==n.cache&&(n.cache=!0),r.load(n).then(function(e){a.data.engineers=e,a.data.searched=!0}).catch(e)}}}(),angular.module("components.engineer",["components.engineer.engineer.form","components.engineer.engineer.list"]),function(){angular.module("components.home",[]).component("swHome",{templateUrl:"app/components/home/home.html",controller:function(){},bindings:{}})}(),angular.module("components",["components.core","components.cultura","components.about","components.home","components.listWeekCards","components.engineer","components.wheel"]),function(){angular.module("components.listWeekCards",["shared.services.service.schedule","shared.services.value.constantes"]).component("swListWeekCards",{templateUrl:"app/components/listWeekCards/listWeekCards.html",controller:e,bindings:{}}),e.$inject=["scheduleService","constEventosDb","$scope","$timeout"];function e(e,t,n,r){var i=this;i.scheduleShifts=[],i.$onInit=function(){e.load().then(function(e){i.scheduleShifts=e,angular.forEach(i.scheduleShifts,function(e,t){var n=o(new Date(e.dteSchedule));e.weekNumber=n,e.weekDay=new Date(e.dteSchedule).getDay()})});var a=e.listenEvent.both.inserted(function(e){if(e.type=t.INSERTED){r(function(){!function(e){e.data.weekNumber=o(new Date(e.data.dteSchedule)),e.data.weekDay=new Date(e.data.dteSchedule).getDay(),i.scheduleShifts.push(e.data),n.$apply()}(e)}.bind(this),11e3)}});n.$on("$destroy",a)};function o(e){(e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))).setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var t=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=("0"+Math.ceil(((e-t)/864e5+1)/7)).slice(-2);return e.getUTCFullYear()+"/"+n}}}(),function(){angular.module("components.wheel",["shared.services.service.engineer","shared.services.factory.handleException","shared.services.service.schedule","shared.services.service.notification","shared.services.value.constantes"]).component("swWheel",{templateUrl:"app/components/wheel/wheel.html",controller:e,styleUrls:["app/components/wheel/wheel.css"],bindings:{}}),e.$inject=["handleExceptionFactory","engineerService","scheduleService","notificationService","$scope","constEventosDb","$timeout"];function e(e,t,n,r,i,o,a){var s=this;s.engineersNames=[],s.engineers=[],s.draftEngineer={},s.$onInit=function(){function r(){t.load({cache:!1}).then(function(e){s.engineers=e,s.engineerNames=[];for(var t=0;t<e.length;t++)s.engineersNames.push(e[t].strNameEngineer);G.setWords(s.engineersNames),G.drawWheel()}).catch(e),n.load({intPageSize:1,intPageNumber:1}).then(function(e){e.length>0?(s.lastDate=e[0].dteSchedule,s.lastPeriod=e[0].intPeriod,s.lastEngineer=e[0].strNameEngineer,s.lastDraftBy=e[0].strFullNameCreated):(s.lastDate=new Date,s.lastPeriod=1)})}var c=t.listenEvent.both.all(r);i.$on("$destroy",c),r();var u=n.listenEvent.hub.inserted(function(e){if(e.type=o.INSERTED){a(function(){(t=e).data.dteSchedule>=s.lastDate&&(s.lastDate=t.data.dteSchedule,s.lastPeriod=t.data.intPeriod,s.lastEngineer=t.data.strNameEngineer,s.lastDraftBy=t.data.strFullNameCreated,i.$apply());var t}.bind(this),14e3)}});i.$on("$destroy",u)},s.startSpinning=function(){var e=0;for(;e<.4;)e=Math.random();G.spin(e)};function c(){s.spinning=!0,s.draftEngineer={},v.bind("update",u),n.save({dteSchedule:s.lastDate,intPeriod:s.lastPeriod}).then(function(e){s.draftEngineer=e,function(){for(var e=angular.copy(d.rotation),t=angular.copy(h);h>.005;)d.rotation=(d.rotation+h*T)%w,h*=$;for(h=angular.copy(t);R()!=s.draftEngineer.strNameEngineer;)h*=h/(h*$),d.rotation=(d.rotation+h*T)%w;d.rotation=e}()},e)}function u(){d.rotation=(d.rotation+h*T)%w,h<=.4?void 0!==s.draftEngineer.strNameEngineer&&(h*=$):h*=$,l(d.rotation),h<.005&&(s.spinning=!1,v.unbind("update",u),s.lastDate=s.draftEngineer.dteSchedule,s.lastPeriod=s.draftEngineer.intPeriod,s.lastEngineer=s.draftEngineer.strNameEngineer,s.lastDraftBy=s.draftEngineer.strFullNameCreated,i.$apply(),r.show("success","WHEEL.SUCCESS-SAVED"))}function l(e){D.onWheelTick&&"function"==typeof D.onWheelTick&&D.onWheelTick(e)}var d,h,f,v,g,p=["#f7d046","#ff4c5a","#f08cba","#49c4d2","#924e84","#fd926f","#245a65","#ff6a76","#633d89","#3cb878","#ee1c24","#f6989d","#00aef0","#f26522","#fff200","#e70697","#000000"],m=Math.PI,w=2*m,E=function(e){return e/180*m},y={mousedown:N,touchstart:N,mousemove:F,touchmove:F,mouseup:M,touchend:M},b={tickerRadius:.06,textSize:.12,edgeDist:.14},S=function(e,t,n){var r=n.cx,i=n.cy;return{x:r+e*Math.cos(t),y:i+e*Math.sin(t)}},$=.99,C=.5,T=1,A=!1,U=[],D={width:240,height:240,type:"svg"};function R(){var e=f.length,t=w/e,n=(w-d.rotation+t/2)%w;return f.find(function(e,r){return t*(r+1)>n})}function N(e){O(e);var t=d._renderer.elem;A=t===e.target||t.contains(e.target),U=A?U.concat(P(e)):U,g=performance.now()}function I(e){f=e}function x(e,t){v.renderer.domElement.setAttribute("viewBox","0 0 "+e+" "+t)}function L(){var e=v.width,t=b.tickerRadius*e,n=function(e){var t=v.width,n=v.makeArcSegment(t/2,e,e,.5*e,0,2*m);return n.noStroke(),n}(t).translation;!function(e,t,n){var r=n.x,i=n.y,o=S(e,m/2,{cx:r,cy:i}),a=S(e,t,{cx:r,cy:i}),s={x:r,y:i+e/Math.cos(m/2-t)},c=S(e,m-t,{cx:r,cy:i}),u=v.makePath(o.x,o.y,a.x,a.y,s.x,s.y,c.x,c.y);u.noStroke(),u.fill="#3f51b5"}(t,E(30),n)}function j(){d&&B();var e=v,t=e.width,n=(e.height,p.length),r=2*m/f.length,i=t*b.tickerRadius*2,o=(t-i)/2,a={x:t/2,y:o+i};d=v.makeGroup(),f.map(function(e,t,i){var s=r*t-(m+r)/2,c=v.makeArcSegment(a.x,a.y,0,o,0,2*m/i.length);c.rotation=s,c.noStroke(),c.fill=p[t%n];var u={x:a.x+(o-o*b.edgeDist)*Math.cos(s+r/2),y:a.y+(o-o*b.edgeDist)*Math.sin(s+r/2)},l=v.makeText(e,u.x,u.y);l.rotation=r*t-m/2,l.alignment="right",l.fill="#fff",l.size=o*b.textSize,d.add(c,l)}),d.translation.set(a.x,a.y),d.center(),L(),v.update()}function k(){x(v.width,v.height),j(),L(),v.update()}function M(e){if(A&&U.length>1){var t=P(e),n=U[U.length-2],r=performance.now()-g,i=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));if((h=Math.min(i/r,C))<.4)return;c()}U=[],A=!1}function P(e){var t=O(e);return{x:t.clientX,y:t.clientY}}function O(e){return e.changedTouches?e.changedTouches[0]:e}function F(e){if(A&&U.length){e.preventDefault(),g=performance.now();var t=(U=U.concat(P(e)))[U.length-1],n=U[U.length-2],r=d._renderer.elem.getBoundingClientRect(),i=r.left+r.width/2,o=r.top+r.height/2,a=Math.atan2(n.y-o,n.x-i),s=Math.atan2(t.y-o,t.x-i)-a;T=s>0?1:-1,d.rotation=(d.rotation+s)%w,l(d.rotation),v.update()}}function q(e){h=e,c()}function V(e){var t=e.height,n=e.width;v.width=parseInt(n,10),v.height=parseInt(t,10),v.trigger("resize")}function B(){d.remove.apply(d,d.children),v.clear()}function z(){return B(),function(){var e=v.renderer.domElement;v.unbind("update"),Object.keys(y).map(function(t){return e.removeEventListener(t,y[t])})}(),!0}var _=document.querySelector(".js-mount"),G=(document.querySelector(".js-get-word"),document.querySelector(".js-spin"),document.querySelector(".js-words"),function(e){if(!(e&&"nodeType"in e))throw new Error("no mount element provided");return{destroy:z,drawWheel:j,getCurrentWord:R,init:function(t){D=Object.assign({},D,t),v=new Two({type:Two.Types[D.type],width:D.width,height:D.height}).bind("resize",k).play(),function(){var e=v.renderer.domElement;Object.keys(y).map(function(t){return e.addEventListener(t,y[t])})}(),v.appendTo(e),x(D.width,D.height),v.renderer.domElement.setAttribute("style","\n        -moz-user-select:none;\n        -ms-user-select:none;\n        -webkit-user-select:none;\n        user-select:none;\n        -webkit-tap-highlight-color: rgba(0,0,0,0);\n      ")},setWords:I,spin:q,updateDims:V}}(_));G.init({width:Math.min(window.innerWidth,window.innerHeight),height:Math.min(window.innerWidth,window.innerHeight)}),G.setWords(s.engineersNames),G.drawWheel();window.addEventListener("resize",function(){G.updateDims({width:Math.min(window.innerWidth,window.innerHeight),height:Math.min(window.innerWidth,window.innerHeight)})})}}(),function(){angular.module("shared.directives.animateOnLoad",[]).directive("animateOnLoad",e),e.$inject=["$animateCss"];function e(e){return{link:function(t,n){e(n,{event:"enter",structural:!0}).start()}}}}(),function(){angular.module("shared.directives.compareTo",[]).directive("compareTo",e),e.$inject=[];function e(){return{restrict:"A",require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,r){r.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){r.$validate()})}}}}(),angular.module("shared.directives",["shared.directives.restrict","shared.directives.msgConfirm","shared.directives.animateOnLoad","shared.directives.compareTo"]),function(){angular.module("shared.directives.msgConfirm",[]).directive("msgConfirm",e),e.$inject=["$mdDialog","$filter"];function e(e,t){return{restrict:"A",priority:100,link:{pre:function(n,r,i){if(void 0!=n.$eval(i.msgConfirm)){var o={};i.msgConfirm&&(o=angular.extend({},n.$eval("("+i.msgConfirm+")")));var a=o.title?o.title:"MSGCONFIRM.TITLE",s=o.textContent?o.textContent:"MSGCONFIRM.CONTENT",c=o.ariaLabel?o.ariaLabel:"MSGCONFIRM.ARIALABEL",u=o.ok?o.ok:"MSGCONFIRM.OK",l=o.cancel?o.cancel:"MSGCONFIRM.CANCEL";r.bind("click touchstart",function(r){r.stopImmediatePropagation(),r.preventDefault(),function(r,o,a,s,c,u){o=t("translate")(o),a=t("translate")(a),u=t("translate")(u),s=t("translate")(s),c=t("translate")(c);var l=e.confirm().targetEvent(r).title(o).textContent(a).ok(s).cancel(c);e.show(l).then(function(){n.$eval("("+i.ngClick+")")},function(){})}(r,a,s,u,l,c)})}}}}}}(),angular.module("shared.directives.restrict",[]).directive("restrict",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$parsers.push(function(e){var t=e.replace(new RegExp(n.restrict,"g"),"");return t!=e&&(r.$setViewValue(t),r.$render()),t})}}}]),angular.module("shared.filters",[]),angular.module("shared",["shared.directives","shared.filters","shared.services"]),function(){angular.module("shared.services.factory.appResource",["shared.services.service.baseUrl","shared.services.value.constantes","shared.services.service.mediator","shared.services.service.hub"]).factory("appResourceFactory",e),e.$inject=["$resource","$q","$rootScope","$httpBackend","constEventosDb","baseUrlService","mediatorService","hubService"];function e(e,t,n,r,i,o,a,s){var c={},u=o.getBaseUrl()+"api/";return function(r,o){var l={},d=function(n){var r=e(u+n+"/:action/:id",{},{update:{method:"PUT",params:{id:"@id"}},save:{method:"POST"},remove:{method:"DELETE",params:{id:"@id"}},get:{method:"GET",params:{id:"@id"}},query:{method:"GET",isArray:!0}});return r.clearCache=function(){var e="api/"+n;for(var t in c)t.indexOf(e)>-1&&delete c[t]},r.getAll=function(e){var i=t.defer();if(e&&void 0!==e.cache&&!0===e.cache){var o="api/"+n;for(var a in e){if("[object Array]"===Object.prototype.toString.call(e[a])){for(var s="",u=0;u<e[a].length;u++)u>0&&(s+=","),s+=e[a][u];e[a]=s}"cache"!==a&&(o+="&"+a+"="+e[a])}if(c[o])return i.resolve(c[o]),i.promise}return r.query(e).$promise.then(function(e){o&&(c[o]=e),i.resolve(e)},function(e){i.reject(e)}),i.promise},r}(r);l.load=function(e){var r,i=t.defer(),a=f(e);a.applyScope&&(r=!0,delete a.applyScope);null==o||a.hasOwnProperty(o)||a.hasOwnProperty("loadOne")?(a.id=a[o],delete a[o],d.get(a).$promise.then(function(e){i.resolve(e)},function(e){i.reject(e)})):d.getAll(a).then(function(e){i.resolve(e)},function(e){i.reject(e)});r&&i.promise.finally(function(){setTimeout(function(){n.$apply()},4)});return i.promise},l.save=function(e,n,s){var c=t.defer(),u=f(e);if(null!=o&&u.hasOwnProperty(o))var l=i.UPDATED;else var l=i.INSERTED;if(null!=this.validate){var h=this.validate(u);if(h.length>0)return c.reject({type:"warning",message:h}),c.promise}u[o]?d.update({id:u[o]},u).$promise.then(function(e){a.sendEvent(r,l,e,!1),c.resolve(e)},function(e){c.reject(e)}):d.save(null,u).$promise.then(function(e){a.sendEvent(r,l,e,!1),c.resolve(e)},function(e){c.reject(e)});return c.promise},l.remove=function(e,n,s){var c=t.defer(),u=f(e);u.hasOwnProperty(o)?d.remove({id:u[o]}).$promise.then(function(e){a.sendEvent(r,i.DELETED,e,!1),c.resolve(e)},function(e){c.reject(e)}):c.reject({type:"warning",message:["Não foi informado o ID do registro que se deseja excluir."]});return c.promise},l.validate=function(e){return[]},l.clearCache=function(){return d.clearCache()},l.listenEvent=(h=r,{app:{all:function(e){return a.listenEvent.all(h,e,!0,!1)},inserted:function(e){return a.listenEvent.inserted(h,e,!0,!1)},deleted:function(e){return a.listenEvent.deleted(h,e,!0,!1)},updated:function(e){return a.listenEvent.updated(h,e,!0,!1)}},hub:{all:function(e){return a.listenEvent.all(h,e,!1,!0)},inserted:function(e){return a.listenEvent.inserted(h,e,!1,!0)},deleted:function(e){return a.listenEvent.deleted(h,e,!1,!0)},updated:function(e){return a.listenEvent.updated(h,e,!1,!0)}},both:{all:function(e){return a.listenEvent.all(h,e,!0,!0)},inserted:function(e){return a.listenEvent.inserted(h,e,!0,!0)},deleted:function(e){return a.listenEvent.deleted(h,e,!0,!0)},updated:function(e){return a.listenEvent.updated(h,e,!0,!0)}}});var h;return l.createHub=function(){!0,s.subscribe(r)},l;function f(e){var t={};for(var n in e)void 0!==e[n]&&""!==e[n]&&"function"!=typeof e[n]&&(angular.isDate(e[n])?t[n]=new Date(e[n]-60*e[n].getTimezoneOffset()*1e3).toISOString():t[n]=e[n]);return delete t.viewInfo,t}}}}(),function(){angular.module("shared.services.factory.handleException",["shared.services.service.notification"]).service("handleExceptionFactory",e),e.$inject=["notificationService"];function e(e){return function(t){var n=t.type||"error",r="<strong>An unidentified error has occurred. Please contact support for help.</strong>";if(t.status<=0)r="<strong>No internet connection was found or the server is down. Verify your connection and try again.</strong>";else if(400==t.status){if(r=t.data.message?"<strong>"+t.data.message+"</strong>":"<strong>"+t.data+"</strong>",t.data.modelState)for(var i in t.data.modelState)r+="<br />"+t.data.modelState[i]}else if(401==t.status)n="warning",r="You have not provided the required permission to view this resource.";else if(404==t.status)r=t.data?t.data:"<strong>The resource you are looking for was not found in the server.</strong>";else if(500==t.status)t.data&&(r=t.data.replace(/(?:\r\n|\r|\n)/g,"<br /><br />"));else if(t.message)r=t.message;else if(t.modelState){r="";var o;for(o in t.modelState)r+=t.modelState[o]+"<br />"}e.show(n,r)}}}(),angular.module("shared.services.factory",["shared.services.factory.interceptor","shared.services.factory.mockHttp","shared.services.factory.appResource","shared.services.factory.handleException"]),function(){angular.module("shared.services.factory.interceptor",["shared.services.service.retryQueue"]).factory("interceptorFactory",e),e.$inject=["$q","$localStorage","retryQueueService","$injector","hubService"];function e(e,t,n,r,i){return{request:function(e){e.headers=e.headers||{};var n=i.getConnectionId();void 0!=n&&(e.headers.ConnectionId=n);t.token&&(e.headers.Authorization="Bearer "+t.token.access_token);return e},responseError:function(t){if(401===t.status)return t.config.url.indexOf("token")>-1?t:n.pushRetryFn("unauthorized-server",function(){return r.get("$http")(t.config)}).catch(function(n){return e.reject(t)});return e.reject(t)}}}}(),function(){angular.module("shared.services.factory.mockHttp",[]).factory("MockHttpFactory",e),e.$inject=["$httpBackend"];function e(e){return function(t,n,r){if(void 0==t)throw"It is required to inform the name of the resource in the server.";var i={},o=void 0,a=void 0,s={};s.getData=function(e){return void 0==e?i:_.find(i,e)},s.lastServerAnswer=function(){return o},s.lastServerStatus=function(){return a},function(){var s="/api/"+t,c=RegExp("/api/"+t+"/(.+)$");r&&(i=r);e.whenGET(s).respond(function(e,t,n,r){return o=i,a=200,[200,i,{}]}),e.whenGET(c).respond(function(e,r,s,c){var u=new RegExp("\\/"+t+"\\/([0-9]+)"),l=r.match(u)[1],d={};d[n]=+l;var h=_.find(i,d);return h?(o=h,a=200,[200,h,{}]):(o="",a=404,[404,{},{}])}),e.whenPOST(s).respond(function(e,t,r,s){return(r=angular.fromJson(r))[n]=Math.floor(99999*Math.random()+1e3),i.push(r),o=r,a=201,[201,r,{}]}),e.whenPUT(c).respond(function(e,r,s,c){s=angular.fromJson(s);var u=new RegExp("\\/"+t+"\\/([0-9]+)"),l=r.match(u)[1],d={};d[n]=+l;var h=_.find(i,d);return h?(angular.extend(i[i.indexOf(h)],s),o=s,a=200,[200,s,{}]):(o="",a=404,[404,{},{}])}),e.whenDELETE(c).respond(function(e,r,s,c){var u=new RegExp("\\/"+t+"\\/([0-9]+)"),l=r.match(u)[1],d={};d[n]=+l;var h=_.find(i,d);if(h){var f=i.splice(i.indexOf(h),1);return o=f[0],a=200,[200,f[0],{}]}return o="",a=404,[404,{},{}]})}();return s}}}(),angular.module("shared.services",["shared.services.factory","shared.services.provider","shared.services.service","shared.services.value"]),function(){angular.module("shared.services.provider.authorization",["shared.services.service.security","shared.services.service.retryQueue","ui.router"]).provider("authorization",function(){this.isUserAuthenticated=e,this.isUserinRoles=t,this.$get=n,n.$inject=["securityService","retryQueueService","$rootScope"],e.$inject=["authorization"],t.$inject=["authorization"];function e(e){return e.isUserAuthenticated()}function t(e){var t=this.self.allowedRoles;return e.isUserinRoles(t,"teste")}function n(e,t,n){var r={isUserAuthenticated:function(){if(!e.isAuthenticated())return t.pushRetryFn("unauthenticated-client",r.isUserAuthenticated)},isUserinRoles:function(n){if(!e.isAuthenticated())return t.pushRetryFn("unauthenticated-client",r.isUserinRoles,arguments);var i=e.currentUser();if(!i)return t.pushRetryFn("unauthenticated-client",r.isUserinRoles,arguments);if(void 0!=n){var o=!1;if(_.forEach(n,function(e,t){_.findIndex(i.perfisUsuario,"strNomePerfil",e)>-1&&(o=!0)}),!o)return t.pushRetryFn("unauthorized-client",r.isUserinRoles,arguments)}}};return r}}).config(e),e.$inject=["$stateProvider","authorizationProvider"];function e(e,t){e.decorator("path",function(e,n){(e.self.requireAuthenticatedUser||e.self.allowedRoles)&&(void 0===e.self.resolve&&(e.self.resolve={}),e.self.requireAuthenticatedUser&&(e.self.resolve.requireAuthenticatedUser=t.isUserAuthenticated),e.self.allowedRoles&&(e.self.resolve.requireRoles=t.isUserinRoles),e.resolve=e.self.resolve);return n(e)})}}(),angular.module("shared.services.provider",["shared.services.provider.authorization"]),function(){angular.module("shared.services.service.baseUrl",[]).service("baseUrlService",e),e.$inject=["$location"];function e(e){this.getBaseUrl=function(){return-1!=e.absUrl().indexOf("http://localhost")?"http://localhost:9000/":"/"}}}(),function(){angular.module("shared.services.service.culture",[]).service("cultureService",e),e.$inject=["$localStorage","$mdDialog","$translate","$q"];function e(e,t,n,r){var i=[];this.load=function(){var e=[{strIdCultura:"pt-BR",strNomeCultura:"CULTURA.PORTUGUES"},{strIdCultura:"en-US",strNomeCultura:"CULTURA.INGLES"}],t=r.defer();return n.onReady(function(){angular.forEach(e,function(t,r){e[r].strNomeCultura=n.instant(e[r].strNomeCultura)}),t.resolve(e)}),t.promise},this.getCulture=a,this.setCulture=function(t){var r;"pt-BR"==t?r={culture:t,name:"Português"}:"en-US"==t&&(r={culture:t,name:"English"});e.culture=r,n.use(t);for(var o=i.length,a=0;a<o;a++)i[a](r)},this.onCultureChange=o,function(){if(void 0==a())setTimeout(function(){t.show({template:"<choose-language><choose-language />",parent:angular.element(document.body),clickOutsideToClose:!1,escapeToClose:!1})},4),o(t.hide);else{var e=a();n.use(e.culture)}}();function o(e){return i.push(e),function(){var t=i.indexOf(e);t>-1&&i.splice(t,1)}}function a(){return e.culture}}}(),function(){angular.module("shared.services.service.engineer",["shared.services.factory.appResource"]).service("engineerService",e),e.$inject=["appResourceFactory"];function e(e){var t=e("engineer","intIdEngineer");return t.createHub(),t.validar=function(e){var t=[];return e.strNameEngineer||t.push("The field name is required!"),t},t}}(),function(){angular.module("shared.services.service.hub",["shared.services.value.constantes","shared.services.service.baseUrl","shared.services.service.mediator"]).factory("hubService",e),e.$inject=["$rootScope","constEventosDb","Hub","baseUrlService","mediatorService"];function e(e,t,n,r,i){var o=new n("ApiHub",{listeners:{inserted:function(e,n){i.sendEvent(e,t.INSERTED,n,!0)},updated:function(e,n){i.sendEvent(e,t.UPDATED,n,!0)},deleted:function(e,n){i.sendEvent(e,t.DELETED,n,!0)}},methods:["subscribe","unsubscribe"],errorHandler:function(e){console.log(e)},hubDisconnected:function(){o.connection.lastError&&o.connection.start()},logging:!0,rootPath:r.getBaseUrl()+"signalr"});return{subscribe:function(e){o.promise.then(function(){o.subscribe(e)})},unsubscribe:function(e){o.unsubscribe(e)},getConnectionId:function(){return o.connection.id}}}}(),angular.module("shared.services.service",["shared.services.service.culture","shared.services.service.hub","shared.services.service.notification","shared.services.service.retryQueue","shared.services.service.security","shared.services.service.user","shared.services.service.viewstate","shared.services.service.schedule"]),function(){angular.module("shared.services.service.mediator",["shared.services.value.constantes"]).service("mediatorService",e),e.$inject=["constEventosDb","$rootScope"];function e(e,t){var n=[];this.sendEvent=function(e,r,i,o){var a={type:r,data:i,from:"app"};o&&(a.from="hub");for(var s=n.length,c=0;c<s;c++)n[c].resource==e&&n[c].type==r&&(o&&n[c].fromHub||!o&&n[c].fromApp)&&n[c].callback(a);o&&setTimeout(function(){t.$apply()},4)},this.listenEvent={all:function(e,t,n,a){var s=r(e,t,n,a),c=i(e,t,n,a),u=o(e,t,n,a);return function(){s(),c(),u()}},inserted:r,deleted:i,updated:o};function r(t,n,r,i){return a(t,e.INSERTED,n,r,i)}function i(t,n,r,i){return a(t,e.DELETED,n,r,i)}function o(t,n,r,i){return a(t,e.UPDATED,n,r,i)}function a(e,t,r,i,o){var a={resource:e,type:t,hash:function(e){var t=e.toString(),n=0;if(0==t.length)return n;for(var r=0;r<t.length;r++){var i=t.charCodeAt(r);n=(n<<5)-n+i,n&=n}return n}(r)};i&&(a.fromApp=!0),o&&(a.fromHub=!0);var s=_.findIndex(n,a);return a.callback=r,-1==s?n.push(a):n[s]=a,function(){var e=n.indexOf(a);e>-1&&n.splice(e,1)}}}}(),function(){angular.module("shared.services.service.notification",[]).service("notificationService",e),e.$inject=["$translate"];function e(e){this.show=function(e,n){var r="";if(angular.isObject(n))for(var i in n)if(angular.isArray(n[i]))for(var o=0;o<n[i].length;o++)""!=n[i][o]&&(r+="<span>"+t(n[i][o])+"</span><br/>");else""!=n[i]&&(r+="<span>"+t(n[i])+"</span><br/>");else r=t(n);toastr[e](r),toastr.options={closeButton:!1,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"15000",extendedTimeOut:"2000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}};function t(t){return e.instant(t)}}}(),function(){angular.module("shared.services.service.retryQueue",[]).service("retryQueueService",e),e.$inject=["$q","$log"];function e(e,t){var n=this,r=[];this.onItemAddedCallbacks=[],this.cancelAll=function(){for(;this.hasMore();)r.shift().cancel()},this.hasMore=function(){return r.length>0},this.push=function(e){r.push(e),angular.forEach(n.onItemAddedCallbacks,function(n){try{n(e)}catch(e){t.error("retryQueueService.push(retryItem): callback threw an error"+e)}})},this.pushRetryFn=function(t,r,i){1===arguments.length&&(r=t,t=void 0);var o=e.defer(),a={reason:t,retry:function(){e.when(r.apply(this,i)).then(function(e){o.resolve(e)},function(e){o.reject(e)})},cancel:function(){o.reject()}};return n.push(a),o.promise},this.retryAll=function(){for(var e=r.length,t=0;t<e;t++)t<=r.length-1&&r.shift().retry()},this.retryReason=function(){return n.hasMore()&&r[0].reason}}}(),function(){angular.module("shared.services.service.schedule",["shared.services.factory.appResource"]).service("scheduleService",e),e.$inject=["appResourceFactory"];function e(e){var t=e("schedule","intIdSchedule");return t.createHub(),t.validar=function(e){var t=[];return e.dteSchedule||t.push("The date of the draft is required!"),e.intPeriod||t.push("The period of the shift to draft is required!"),t},t}}(),function(){angular.module("shared.services.service.security",["shared.services.service.baseUrl","shared.services.service.retryQueue","shared.services.factory.appResource","shared.services.service.user"]).service("securityService",e),e.$inject=["$http","$state","$localStorage","$q","$location","retryQueueService","appResourceFactory","baseUrlService","$mdDialog","userService"];function e(e,t,n,r,i,o,a,s,c,u){var l=this,d=void 0,h=!1;o.onItemAddedCallbacks.push(function(e){o.hasMore()&&l.showLogin()}),this.cancelLogin=function(e){c.hide(),o.cancelAll(),f(e)},this.currentUser=function(){return n.user},this.getLastAuthError=function(){return d},this.getLoginReason=function(){var e=o.retryReason();return"unauthenticated-client"==e?"SECURITY.UNAUTHENTICATED-CLIENT":"unauthorized-client"==e||"unauthorized-server"==e?"SECURITY.UNAUTHORIZED-CLIENT":"SECURITY.UNAUTHENTICATED-CLIENT"},this.isAuthenticated=function(){var e=l.currentUser(),t=l.token();return!(!e||_.isEmpty(e)||!t||!t.access_token)},this.login=function(t){d=void 0;var i="grant_type=password&username="+t.username+"&password="+t.password,o=r.defer();return e.post(s.getBaseUrl()+"api/token",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(a).catch(a),o.promise;function a(e){e.data.hasOwnProperty("access_token")?(n.token=e.data,l.requestCurrentUser().then(function(t){l.isAuthenticated()&&c.hide(),d=void 0,o.resolve(e.data)})):(d=e.data,o.reject(e.data))}},this.logout=function(e){delete n.token,delete n.user,f(e)},this.requestCurrentUser=function(){return l.isAuthenticated()?r.when(l.currentUser()):l.token()?u.load({action:"current",loadOne:!0}).then(function(e){return n.user=e,r.when(l.currentUser())}):o.pushRetryFn("unauthenticated-client",l.requestCurrentUser)},this.showLogin=function(){h||(h=!0,c.show({template:"<md-dialog flex-gt-lg='50' flex-lg='65' flex-md='70' flex-sm='100' style='max-width:500px;' aria-label='Login dialog'><md-dialog-content><login></login></md-dialog-content></md-dialog>",parent:angular.element(document.body),clickOutsideToClose:!1}).then(function(){h=!1,o.retryAll()},function(e){h=!1,r.reject("Not Authorized"),o.cancelAll()}))},this.closeLogin=function(){1==h&&(h=!1,c.hide())},this.token=function(){return n.token};function f(e){e=e||"/login",i.path(e)}}}(),function(){angular.module("shared.services.service.user",["shared.services.factory.appResource"]).service("userService",e),e.$inject=["appResourceFactory"];function e(e){var t=e("user","intIdUser");return t.validar=function(e){var t=[];return e.strFullName||t.push("The name is required!"),e.strEmail||t.push("The e-mail is required!"),e.strPassword||t.push("The password is required!"),t},t}}(),function(){angular.module("shared.services.service.viewstate",[]).service("viewstateService",e),e.$inject=[];function e(){var e=[],t={};this.getHistory=function(t){{if(t)return e[t]?e[t]:null;throw"O nome da view não foi informado."}},this.getView=function(t,n){{if(!t)throw"O nome da view não foi informado.";if(!e[t])return this.saveView(t,{});if(!n)return e[t][e[t].length-1]}},this.getLastView=function(){return t},this.newView=function(e){{if(e){var t=this.getView(e);if(null==t)return this.saveView(e,{});var n={};for(var r in t)"viewInfo"!=r&&"$"!=r.substring(0,1)&&(t[r]instanceof Array?n[r]=[]:_typeof("number"===t[r])||_typeof("string"===t[r])?n[r]="":_typeof("object"===t[r])?n[r]={}:n[r]=t[r]);return this.saveView(e,n)}throw"O nome da view não foi informado."}},this.saveView=function(n,r){if(n&&r){var i=function(){var e=new Date;return e.getFullYear()+""+e.getMonth()+e.getDate()+e.getTime()}();return r.viewInfo={viewId:i,createdAt:new Date},e[n]||(e[n]=[]),e[n].push(r),t=r,r}}}}(),angular.module("shared.services.value.constantes",[]).value("constEventosDb",{INSERTED:1,UPDATED:2,DELETED:3}),angular.module("shared.services.value",["shared.services.value.constantes"]),function(){angular.module("App").config(e),e.$inject=["$stateProvider"];function e(e){e.state("home",{url:"/",requireAuthenticatedUser:!1,template:"<sw-home></sw-home>"}).state("about",{url:"/about",template:"<sw-about></sw-about>"}).state("signup",{url:"/signup",template:"<sw-signup></sw-signup>"})}}(),function(){angular.module("App").config(e),e.$inject=["$stateProvider"];function e(e){e.state("engineer",{url:"/restrict/engineer",abstract:!0,views:{"@":{template:'<create-tabs title="create.title" tabs="create.tabs" current-tab-index="$resolve.tab.index" current-view="$resolve.current"></create-tabs />',resolve:{tabs:function(){return[{tabName:"TABS.ENGINEER.SEARCH",tabIcon:"search",tabViewName:"search",tabStates:["engineer.search"]},{tabName:"TABS.ENGINEER.ENGINEER",tabIcon:"note_add",tabViewName:"engineer",tabStates:["engineer","engineer.engineer","engineer.form"]}]},title:function(){return"TABS.ENGINEER.TITLE"}},controller:function(e,t){this.tabs=e,this.title=t},controllerAs:"create"}},requireAuthenticatedUser:!0}).state("engineer.search",{url:"/search",views:{search:{template:"<sw-engineer-list></sw-engineer-list>"},engineer:{template:"<sw-engineer-form></sw-engineer-form>"}}}).state("engineer.engineer",{url:"",views:{search:{template:"<sw-engineer-list></sw-engineer-list>"},engineer:{template:"<sw-engineer-form></sw-engineer-form>"}}}).state("engineer.form",{url:"/{id:[0-9]*}",views:{search:{template:"<sw-engineer-list></sw-engineer-list>"},engineer:{template:'<sw-engineer-form id="$resolve.intIdEngineer"></sw-engineer-form>',resolve:{intIdEngineer:["$stateParams",function(e){return e.id}]}}}})}}();