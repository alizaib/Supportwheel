<!DOCTYPE html>

<html>
<head>
  <title>msgConfirmDirective.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>msgConfirmDirective.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>This function has the objective to confirm an action from the user.
It runs ng-click only if the user confirm before.</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <hr>
<p>  Confirmation Modal in Material Desing</p>
<hr>
<p>It will accept the following configuration:</p>
<ul>
<li>title: title : Defaults to “Confirm ? “</li>
<li>textContent: Message to ask confirmation for</li>
<li>ok: Message to button ok: Defaults to “Yes”</li>
<li>cancel: Message to button Cancel: Defaults to “No”</li>
<li>ariaLabel: Message for aria label</li>
</ul>
<hr>

            </div>
            
            <div class="content"><div class='highlight'><pre>
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<span class="hljs-meta">

    'use strict'</span>;

    angular.module(<span class="hljs-string">'shared.directives.msgConfirm'</span>, [

    ])

    .directive(<span class="hljs-string">'msgConfirm'</span>, msgConfirm);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <hr>
<p> Diretiva</p>
<hr>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Injeta dependencias da diretiva</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    msgConfirm.$inject = [<span class="hljs-string">'$mdDialog'</span>, <span class="hljs-string">'$filter'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">msgConfirm</span>(<span class="hljs-params">$mdDialog, $filter</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">100</span>,
            <span class="hljs-attr">link</span>: {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>It is inside pre so it can happens before ng-click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                pre: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">scope, element, attrs</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Get options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">if</span> (scope.$<span class="hljs-built_in">eval</span>(attrs.msgConfirm) != <span class="hljs-literal">undefined</span>) {
                        <span class="hljs-keyword">var</span> options = {};
                        <span class="hljs-keyword">if</span> (attrs.msgConfirm) {
                            options = angular.extend({}, scope.$<span class="hljs-built_in">eval</span>(<span class="hljs-string">"("</span> + attrs.msgConfirm + <span class="hljs-string">")"</span>));
                        }

                        <span class="hljs-keyword">var</span> title = options.title ? options.title : <span class="hljs-string">"MSGCONFIRM.TITLE"</span>;
                        <span class="hljs-keyword">var</span> textContent = options.textContent ? options.textContent : <span class="hljs-string">"MSGCONFIRM.CONTENT"</span>;
                        <span class="hljs-keyword">var</span> ariaLabel = options.ariaLabel ? options.ariaLabel : <span class="hljs-string">"MSGCONFIRM.ARIALABEL"</span>;
                        <span class="hljs-keyword">var</span> ok = options.ok ? options.ok : <span class="hljs-string">"MSGCONFIRM.OK"</span>;
                        <span class="hljs-keyword">var</span> cancel = options.cancel ? options.cancel : <span class="hljs-string">"MSGCONFIRM.CANCEL"</span>;

                        <span class="hljs-keyword">var</span> openConfirm = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event, title, textContent, ok, cancel, ariaLabel</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Translate values everytime it will show the modal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            title = $filter(<span class="hljs-string">'translate'</span>)(title);
                            textContent = $filter(<span class="hljs-string">'translate'</span>)(textContent);
                            ariaLabel = $filter(<span class="hljs-string">'translate'</span>)(ariaLabel);
                            ok = $filter(<span class="hljs-string">'translate'</span>)(ok);
                            cancel = $filter(<span class="hljs-string">'translate'</span>)(cancel);</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Generate confirmation dialogin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            <span class="hljs-keyword">var</span> confirm = $mdDialog.confirm()
                              .targetEvent(event)
                              .title(title)
                              .textContent(textContent)
                              .ok(ok)
                              .cancel(cancel);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>.ariaLabel(ariaLabel);</p>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Show dialog</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            $mdDialog.show(confirm).then(modalConfirm, modalCancel);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Confirmation Function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">modalConfirm</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Executes ng-click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                scope.$<span class="hljs-built_in">eval</span>(<span class="hljs-string">"("</span> + attrs.ngClick + <span class="hljs-string">")"</span>);
                            }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Cancelation Function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">modalCancel</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Nothing to do</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            }
                        }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Here creates the event for the click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        element.bind(<span class="hljs-string">'click touchstart'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
                            e.stopImmediatePropagation();
                            e.preventDefault();
                            openConfirm(e, title, textContent, ok, cancel, ariaLabel);
                        });
                    }
                }
            }
        }
    }

})();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
